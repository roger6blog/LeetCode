
https://wdxtub.com/interview/14520596997643.html

# 系統設計
對於初級程序員的面試，最難的部分可能就是所謂的設計題。  
設計題可以分成兩個類別：  
系統架構設計和利用面向對象編程原理進行程序設計。  
前者所涉及的技術往往包括數據庫，並發處理和分布式系統等等，  
對於經驗要求和知識要求比較高。我們先來看看系統設計的面試流程:

1. 題目描述
    * 往往非常簡單，如：設計一個XX系統。  
    或者：你有沒有用過XXX，給你看一下它的界面和功能，你來設計一個。
2. 闡述題意
    * 面試者需向面試官詢問系統的具體要求。  
    如，需要什麽功能，需要承受的流量大小，是否需要考慮可靠性，容錯性等等。
3. 面試者提供一個初步的系統設計
4. 面試官這對初步的系統中提出一些後續的問題：  
如果要加某個功能怎麽辦，如果流量大了怎麽辦，如何考慮一致性，如果機器掛了怎麽辦。
5. 面試者根據面試官的後續問題逐步完善系統設計
6. 完成面試
總體特點是以交流為主，畫圖和代碼為輔。

根據我們面試別人和參與面試的經驗，先從面試官的角度給出一些考量標準：

* 適應變化的需求(Adapt to the changing requirements )
* 設計乾凈，優美，考慮周到的系統(Produce a system that is clean, elegant, well thought )
* 解釋為何這麽實現(Explain why you choose this implementation )
* 對自己的能力水平很熟練(Be familiar with your experience level to make decisions )
* 在一些高層結構和覆雜性方面有設計(Answer in high level of scale and complexity )

按照評分體系的化，分成下面4個等級

|Scoring|Candidate|Criteria|
|---|---|---|
|1.0|Bad|No sense of requirement, no scoping|
|2.0|Poor|Limited knowledge, common sense|
|3.0|Good|Reasonable Solution, explain clearly|
|4.0|Great|Out of expectation, well thoughtful, trade-off|

		
其實大家大可不必追求完美，在真正的面試中，沒有人能對答如流，  
往往面試官也會給出善意的提示，就算你沒回答某個子問題，  
在面試後的評價中也會綜合衡量，跟其他的面試者比較，最終打出一個分數。  
我認為很多人在2到3分左右，當然我們目標是盡量在3分以上。  


## 解題策略
### Abstractions, Object and Decoupling
通常，關於OOP，面試官會讓面試者設計一個程序框架，該程序能夠實現一些特定的功能。  
比如，如何實現一個音樂播放器，如何設計一個車庫管理程序等等。  
對於此類問題，設計的關鍵過程一般包括抽象(abstraction)，  
設計對象(object)和設計合理的層次／接口(decoupling)。  
這裏，我們舉一個例子簡單說明這些過程分別需要做些什麽，  
在“模式識別”給出更為具體和完整的實例。

### 繼承/組合/參數化類型
在面向對象中最常用的兩種代碼覆用技術就是繼承和組合。  
在設計對象的時候，“Is-A”表示一種繼承關系。  
比如，班長“Is-A”學生，那麽，學生就是基類，班長就是派生類。  
在確定了派生關系之後，我們需要分析什麽是基類變量(base class variables)  
什麽是子類變量(sub class variables)，  
並由此確定基類和派生類之間的聯系。  
而“Has-A”表示一種從屬關系，這就是組合。  
比如，班長“Has-A”眼鏡，  
那就可以解釋為班長實例中擁有一個眼鏡實例變量(instance variable)。  
在具體實現的時候，班長類中定義一個眼鏡的基類指針。  
“在生成班長實例的時候，同時生成一個眼鏡實例，利用眼鏡的基類指針指向這個實例。  
任何關於眼鏡的操作函數都可以利用這個基類指針實現多態(polymorphism)。  
注意，多態是OOP相關的一個重要概念，也是面試常考的概念之一。   

在C++中，最常見的多態指的是用基類指針指向一個派生類的實例，  
當用該指針調用一個基類中的虛函數時，  
實際調用的是派生類的函數實現，而不是基類函數。  
如果該指針指向另一個派生類實例，則調用另一個派生類的函數實現。  
因此，比如工廠模式返回一個實例，上層函數不需要知道實例來自哪個派生類，   
只需要用一個基類指針指向它，就可以直接獲得需要的行為。  
從編譯的角度來看，函數的調用地址並不是在編譯階段靜態決定，  
而是在運行階段，動態地決定函數的調用地址。

多態是通過虛函數表實現的。當基類中用virtual關鍵字定義函數時，  
系統自動分配一個指針，指向該類的虛函數表。虛函數表中存儲的是函數指針。  
在生成派生類的時候，會將派生類中對應的函數的地址寫到虛函數表。  
之後，當利用基類指針調用函數時，先通過虛函數表指針找到對應的虛函數表， 
再通過表內存儲的函數指針調用對應函數。  
由於函數指針指向派生類的實現，因此函數行為自然也就是派生類中定義的行為了。

在通常情況下，我們更偏向於“Has-A”的設計模式。  
因為該模式減少了兩個實例之間的相關性。  
對於繼承的使用，通常情況下我們會定義一個虛基類，由此派生出多個不同的實例類。  
在業界的程序開發中，多重繼承並不常見，  
Java甚至不允許從多個父類同時繼承，產生一個子類。

此外，我們還要提及參數化類型。  
參數化類型，或者說模版類也是一種有效的代碼覆用技術。  
在C++的標準模版庫中大量應用了這種方式。  
例如，在定義一個List的變量時，List被另一個類型String所參數化。

設計模式著重於代碼的覆用，所以在選擇覆用技術上，有必要看看上述三種覆用技術優劣。

#### 繼承

通過繼承方式，子類能夠非常方便地改寫父類方法，同時  
保留部分父類方法，可以說是能夠最快速地達到代碼覆用。  
繼承是在靜態編譯時候就定義了，所以無法再運行時刻改寫父類方法。  
因為子類沒有改寫父類方法的話，就相當於依賴了父類這個方法的實現細節,被認為破壞封裝性。  
並且如果父類接口定義需要更改時，子類也需要提更改響應接口。
    
#### 組合

對象組合通過獲得其他對象引用而在運行時刻動態定義的。  
組合要求對象遵守彼此約定，進而要求更仔細地定義接口，  
而這些接口並不妨礙你將一個對象和另外一個對象一起使用。  
對象只能夠通過接口來訪問，所以我們並沒有破壞封裝性。  
而且只要抽象類型一致，對象是可以被替換的。  
使用組合方式，我們可以將類層次限制在比較小的範圍內，不容易產生類的爆炸。  
相對於繼承來說,組合可能需要編寫“更多的代碼。  
  
#### 參數化類型

參數化類型方式是基於接口的編程，在一定程度上消除了類型給程序設計語言帶來的限制。  
相對於組合方式來說，缺少的是動態修改能力。  
因為參數化類型本身就不是面向對象語言的一個特征，  
所以在面向對象的設計模式裏面，沒有一種模式是於參數化類型相關的。  
實踐上我們方面是可以使用參數化類型來編寫某種模式的。  

#### 總結

對象組合技術允許你在運行時刻改變被組合的行為，但是它存在間接性，相對來說比較低效。  
繼承允許你提供操作的缺省實現，通過子類來重定義這些操作，但是不能夠在運行時改變。  
參數化允許你改變所使用的類型，同樣不能夠在運行時改變。  


***


## 其他面試重點細節
1. 準備好自我介紹，因為面試官往往沒時間看你簡歷，或者一邊聽你自我介紹一邊看簡歷，  
要讓他們感到對 CS 的熱愛，對工作的向往和對自己以往經歷的自豪。要提的點應該包括：
    * 為什麽是這個公司
    * 為什麽是這個職位
    * 為什麽是我
2. 交流非常非常重要，鍛煉自己邊說邊寫的能力，一面理清思路，  
一面讓面試官了解自己在幹什麽
3. 放輕松，保持自信，說話大聲點流利點
4 .在函數之前寫幾句文檔
5. 一開始 validate input
6. 在合適的地方加註釋
7. 面試完之後立即發 Thank you letter
## 技術面試的流程模板
1. 明確題意：通過與面試官交流明確需要解答的問題。  
這部分主要為了讓自己放松心態，並且給面試官留下你具有良好團隊意識和交流能力的印象。  
2. 描述大體思路：描述你打算用什麽算法，什麽數據結構。  
主要是為了讓面試官了解你的思維過程，如果你給出的解答與他想要的答案偏差太多，  
可以及時糾正。同時，描述思路也給了你自己思考的機會。
3. 實現算法：先處理邊界條件。對於重要的算法模塊，加一些註釋或者與面試官進行交流。  
目的是讓面試官始終了解你在做什麽，算法框架是什麽。  
4. 跑一個測試：用一個測試用例(test case)走一遍你寫的程序。  
目的在於和面試官一起確保你的算法是有效的，可以在過程中及時發現並糾正自己的錯誤。  
同時，給面試官留下你有寫單元測試習慣的良好印象。
5. 描述算法複雜度，回答面試官的問題  
## 總體策略
越好的公司越要放到最後面試。  
因為你每面試一次，尤其是onsite，基本上會都有新的感悟，都會發現自己之前準備上的不足，  
而這個過程本身就是一種提高，所以說基本上是越面越強的。  
投簡歷也要抓住時機不要錯過機會：許多大公司招new grad都是在某一特定時間內，  
過了這段招滿了就不招了。今年的例子比如微軟思科雅虎。這三家公司我都沒拿到面試。  
不過好在flg都是全年招人的。  
  